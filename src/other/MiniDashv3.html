<html>
  <head>
    <style>
    div.unstyledTable {
  border: 4px solid #4F5E7A;
  width: 100%;
  height: 200px;
  text-align: center;
}
.divTable.unstyledTable .divTableCell, .divTable.unstyledTable .divTableHead {
  border: 0px solid #013D79;
  padding: 10px 0px;
}
.divTable.unstyledTable .divTableBody .divTableCell {
  font-size: 40px;
  font-weight: bold;
  color: #233659;
}
.divTable.unstyledTable .divTableCellValues, .divTable.unstyledTable .divTableHead {
  border: 0px solid #013D79;
  padding: 10px 0px;
}
.divTable.unstyledTable .divTableBody .divTableCellValues {
  font-size: 40px;
  font-weight: bold;
  color: #ffffff;
}
.divTable.unstyledTable .divTableRow:nth-child(even) {
  background: #013D79;
} 
/* DivTable.com */
.divTable{ display: table; }
.divTableRow { display: table-row; }
.divTableHeading { display: table-header-group;}
.divTableCell, .divTableHead { display: table-cell;}
.divTableHeading { display: table-header-group;}
.divTableFoot { display: table-footer-group;}
.divTableBody { display: table-row-group;}
    </style>
    <script>

    var theUrl = '';

    var HttpClient = function() {
      this.get = function(aUrl, aCallback) {
          var anHttpRequest = new XMLHttpRequest();
          anHttpRequest.onreadystatechange = function() {
              if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
                  aCallback(anHttpRequest.responseText);
          }

          anHttpRequest.open( "GET", aUrl, true );
          anHttpRequest.send( null );
      }
  }

  const urgentQueueSid = 'WQ08c9f048a90ce5b6b2be6f90a20b6610';
  const nonUrgentQueueSid = 'WQa2daa7d64f6b9e37a55b2e6778c19322'

  function updateStats() {

   var client = new HttpClient();
    client.get(`https://copper-narwhal-5955.twil.io/queueStats?queueSID=${urgentQueueSid}`, function(response) {
      queueStats = JSON.parse(response);
      var pendingTasks = queueStats.tasksByStatus.pending;
      var longestWaitingTask = queueStats.longestTaskWaitingAge;
      var agentsLoggedIn = queueStats.totalAvailableWorkers;
      document.getElementById(`pendingTaskCell-${urgentQueueSid}`).innerHTML = pendingTasks;
      document.getElementById(`longestWaitingTaskCell-${urgentQueueSid}`).innerHTML = longestWaitingTask;
      document.getElementById(`agentsLoggedInCell-${urgentQueueSid}`).innerHTML = agentsLoggedIn;

    });
    var client = new HttpClient();
    client.get(`https://copper-narwhal-5955.twil.io/queueStats?queueSID=${nonUrgentQueueSid}`, function(response) {
      queueStats = JSON.parse(response);
      var pendingTasks = queueStats.tasksByStatus.pending;
      var longestWaitingTask = queueStats.longestTaskWaitingAge;
      var agentsLoggedIn = queueStats.totalAvailableWorkers;
      document.getElementById(`pendingTaskCell-${nonUrgentQueueSid}`).innerHTML = pendingTasks;
      document.getElementById(`longestWaitingTaskCell-${nonUrgentQueueSid}`).innerHTML = longestWaitingTask;
      document.getElementById(`agentsLoggedInCell-${nonUrgentQueueSid}`).innerHTML = agentsLoggedIn;

    });
  }

  function refresh() {
 
    myVar = setInterval(updateStats, 3000);

}
    </script>
  </head>
  <body onload="refresh()">
    <div class="divTable unstyledTable" align="center">
    <div class="divTableBody">
        <div class="divTableRow">
        <div class="divTableCell">Urgent Chats Waiting</div>
        </div>
        <div class="divTableRow">
        <div class="divTableCellValues" id='pendingTaskCell-WQ08c9f048a90ce5b6b2be6f90a20b6610'>loading...</div>
        </div>
        <div class="divTableRow">
        <div class="divTableCell">Wait Time</div>
        </div>
        <div class="divTableRow">
        <div class="divTableCellValues" id='longestWaitingTaskCell-WQ08c9f048a90ce5b6b2be6f90a20b6610'>loading...</div>
        </div>
        <div class="divTableRow">
        <div class="divTableCell">Agents Available</div>
        </div>
        <div class="divTableRow">
        <div class="divTableCellValues" id='agentsLoggedInCell-WQ08c9f048a90ce5b6b2be6f90a20b6610'>loading...</div>
        </div>
        <div class="divTableRow">
          <div class="divTableCell">Non-Urgent Chats Waiting</div>
          </div>
          <div class="divTableRow">
          <div class="divTableCellValues" id='pendingTaskCell-WQa2daa7d64f6b9e37a55b2e6778c19322'>loading...</div>
          </div>
          <div class="divTableRow">
          <div class="divTableCell">Wait Time</div>
          </div>
          <div class="divTableRow">
          <div class="divTableCellValues" id='longestWaitingTaskCell-WQa2daa7d64f6b9e37a55b2e6778c19322'>loading...</div>
          </div>
          <div class="divTableRow">
          <div class="divTableCell">Agents Available</div>
          </div>
          <div class="divTableRow">
          <div class="divTableCellValues" id='agentsLoggedInCell-WQa2daa7d64f6b9e37a55b2e6778c19322'>loading...</div>
          </div>
    
    </div>
    </div>
   </body>
</html>
